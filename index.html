<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="vendor/css/normalize.css">
        <link rel="stylesheet" type="text/css" href="vendor/css/bootstrap.css">
        <style type="text/css">
        </style>
        <title>permalink.js</title>
    </head>
    <body class="jumbotron">
        <div class="col-lg-6 col-lg-offset-3 form" style="padding: 20px">
            <h1>PermalinkJS</h1>
            <p style="color: #999;">Getting permalinks made <em>easy</em> just for <strong>YOU</strong> !</p>
            <div class="form-group">
                <input class="form-control" id="sourceUrl" placeholder="Paste your link here" type="text"/>
            </div>
            <div class="form-group">
                <div class="input-group">
                    <input class="form-control" id="permalinkUrl" placeholder="Permalink will pop here" type="text"/>
                    <span class="input-group-btn">
                        <button class="btn btn-default" id="copyPermalink" type="button">Copy</button>
                    </span>
                </div>
            </div>
            <div class="alert alert-danger" id="message" style="display: none;">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>
                <strong>Fail!</strong> Your link doesn't appear to be valid.
            </div>
        </div>

        <script src="vendor/js/jquery.js" type="text/javascript"></script>
        <script src="vendor/js/bootstrap.js" type="text/javascript"></script>
        <script src="permalink.js" type="text/javascript"></script>
        <script type="text/javascript">
            jQuery(function($) {
                $("#copyPermalink").click(function() {
                    var permalink = $("#permalinkUrl").val();
                    // TODO
                });
                $("#sourceUrl").keyup(function() {
                    var url = $("#sourceUrl").val();

                    if (url == "") {
                        $("#message").hide("fast");
                        $("#sourceUrl").parent().removeClass("has-error has-success");

                        return;
                    }

                    var permalink = generatePermalink(url);

                    if (!permalink) {
                        $("#message").show("fast");
                        $("#sourceUrl").parent().addClass("has-error");
                        $("#sourceUrl").parent().removeClass("has-success");
                    }
                    else {
                        $("#message").hide("fast");
                        $("#permalinkUrl").val(permalink);
                        $("#sourceUrl").parent().addClass("has-success");
                        $("#sourceUrl").parent().removeClass("has-error");
                    }
                });
            });
        </script>
    </body>
</html>